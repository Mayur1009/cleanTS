<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clean univariate time-series data — cleanTS • cleanTS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Clean univariate time-series data — cleanTS" />
<meta property="og:description" content="cleanTS()is the main function of the package which creates a cleanTS
object. It performs all the different data cleaning tasks, such as
converting the timestamps to proper format, imputation of missing values,
handling outliers, etc." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cleanTS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/extra/about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Mayur1009/cleanTS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clean univariate time-series data</h1>
    <small class="dont-index">Source: <a href='https://github.com/Mayur1009/cleanTS/blob/master/R/cleanTS.R'><code>R/cleanTS.R</code></a></small>
    <div class="hidden name"><code>cleanTS.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>cleanTS()</code>is the main function of the package which creates a cleanTS
object. It performs all the different data cleaning tasks, such as
converting the timestamps to proper format, imputation of missing values,
handling outliers, etc.</p>
    </div>

    <pre class="usage"><span class='fu'>cleanTS</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>date_format</span>,
  imp_methods <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"na_interpolation"</span>, <span class='st'>"na_locf"</span>, <span class='st'>"na_ma"</span>, <span class='st'>"na_kalman"</span><span class='op'>)</span>,
  time <span class='op'>=</span> <span class='cn'>NULL</span>,
  value <span class='op'>=</span> <span class='cn'>NULL</span>,
  replace_outliers <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame containing the input data. By default, it considers
that the first column to contain the timestamps and the second column
contains the observations.If that is not the case or if it contains more than
two columns then specify the names of time and value columns using the
<code>time</code> and <code>value</code> arguments.</p></td>
    </tr>
    <tr>
      <th>date_format</th>
      <td><p>Format of timestamps used in the data. It uses lubridate
formats as mentioned
<a href='https://lubridate.tidyverse.org/reference/parse_date_time.html#details'>here</a>.
More than one formats can be using a vectors of strings.</p></td>
    </tr>
    <tr>
      <th>imp_methods</th>
      <td><p>The imputation methods to be used.</p></td>
    </tr>
    <tr>
      <th>time</th>
      <td><p>Optional, the name of column in provided data to be used as
time column.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>Optional, the name of column in provided data, to be used as
value column.</p></td>
    </tr>
    <tr>
      <th>replace_outliers</th>
      <td><p>Boolean, if <code>TRUE</code> then the outliers found will be
removed and imputed using the given imputation methods.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>cleanTS</code> object which contains:</p><ul>
<li><p>Cleaned data</p></li>
<li><p>Missing timestamps</p></li>
<li><p>Duplicate timestamps</p></li>
<li><p>Imputation errors</p></li>
<li><p>Outliers</p></li>
<li><p>Outlier imputation errors</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Convert sunspots.month to dataframe</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>timetk</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/timetk/man/tk_tbl.html'>tk_tbl</a></span><span class='op'>(</span><span class='va'>sunspot.month</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `type_convert()` only converts columns of type 'character'.</span>
#&gt; <span class='warning'>- `df` has no columns of type 'character'</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 3,177 × 2</span>
#&gt;    index     value
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;yearmon&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'> 1</span> Jan 1749   58  
#&gt; <span style='color: #BCBCBC;'> 2</span> Feb 1749   62.6
#&gt; <span style='color: #BCBCBC;'> 3</span> Mar 1749   70  
#&gt; <span style='color: #BCBCBC;'> 4</span> Apr 1749   55.7
#&gt; <span style='color: #BCBCBC;'> 5</span> May 1749   85  
#&gt; <span style='color: #BCBCBC;'> 6</span> Jun 1749   83.5
#&gt; <span style='color: #BCBCBC;'> 7</span> Jul 1749   94.8
#&gt; <span style='color: #BCBCBC;'> 8</span> Aug 1749   66.3
#&gt; <span style='color: #BCBCBC;'> 9</span> Sep 1749   75.9
#&gt; <span style='color: #BCBCBC;'>10</span> Oct 1749   75.5
#&gt; <span style='color: #949494;'># … with 3,167 more rows</span></div><div class='input'>
<span class='co'># Randomly insert missing values to simulate missing value imputation</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span>
<span class='va'>ind</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>, <span class='fl'>100</span><span class='op'>)</span>
<span class='va'>data</span><span class='op'>$</span><span class='va'>value</span><span class='op'>[</span><span class='va'>ind</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>

<span class='co'># Perform cleaning</span>
<span class='va'>cts</span> <span class='op'>&lt;-</span> <span class='fu'>cleanTS</span><span class='op'>(</span><span class='va'>data</span>, date_format <span class='op'>=</span> <span class='st'>"my"</span>, time <span class='op'>=</span> <span class='st'>"index"</span>, value <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `type_convert()` only converts columns of type 'character'.</span>
#&gt; <span class='warning'>- `df` has no columns of type 'character'</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>cts</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $clean_data
#&gt; <span style='color: #949494;'># A tibble: 3,177 × 5</span>
#&gt;    time                value missing_type method_used is_outlier
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;dttm&gt;</span>              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>        <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>       <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>     
#&gt; <span style='color: #BCBCBC;'> 1</span> 1749-01-01 <span style='color: #949494;'>00:00:00</span>  58   <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 2</span> 1749-02-01 <span style='color: #949494;'>00:00:00</span>  62.6 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 3</span> 1749-03-01 <span style='color: #949494;'>00:00:00</span>  70   <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 4</span> 1749-04-01 <span style='color: #949494;'>00:00:00</span>  55.7 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 5</span> 1749-05-01 <span style='color: #949494;'>00:00:00</span>  85   <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 6</span> 1749-06-01 <span style='color: #949494;'>00:00:00</span>  83.5 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 7</span> 1749-07-01 <span style='color: #949494;'>00:00:00</span>  94.8 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 8</span> 1749-08-01 <span style='color: #949494;'>00:00:00</span>  66.3 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'> 9</span> 1749-09-01 <span style='color: #949494;'>00:00:00</span>  75.9 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #BCBCBC;'>10</span> 1749-10-01 <span style='color: #949494;'>00:00:00</span>  75.5 <span style='color: #BB0000;'>NA</span>           <span style='color: #BB0000;'>NA</span>          FALSE     
#&gt; <span style='color: #949494;'># … with 3,167 more rows</span>
#&gt; 
#&gt; $missing_ts
#&gt; POSIXct of length 0
#&gt; 
#&gt; $duplicate_ts
#&gt; POSIXct of length 0
#&gt; 
#&gt; $imp_methods
#&gt; [1] "na_interpolation, na_locf, na_ma, na_kalman"
#&gt; 
#&gt; $mcar_err
#&gt; <span style='color: #949494;'># A tibble: 1 × 4</span>
#&gt;   na_interpolation na_locf na_ma na_kalman
#&gt;              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>             2.30    2.92  2.25      2.25
#&gt; 
#&gt; $mar_err
#&gt; <span style='color: #949494;'># A tibble: 1 × 4</span>
#&gt;   na_interpolation na_locf na_ma na_kalman
#&gt;              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>            0.299   0.407 0.263     0.268
#&gt; 
#&gt; $outliers
#&gt; <span style='color: #949494;'># A tibble: 39 × 4</span>
#&gt;    time                value orig_value method_used
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;dttm&gt;</span>              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>      
#&gt; <span style='color: #BCBCBC;'> 1</span> 1749-11-01 <span style='color: #949494;'>00:00:00</span>  78.4       159. na_ma      
#&gt; <span style='color: #BCBCBC;'> 2</span> 1769-09-01 <span style='color: #949494;'>00:00:00</span> 111.        149. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 3</span> 1769-10-01 <span style='color: #949494;'>00:00:00</span> 111.        158. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 4</span> 1769-11-01 <span style='color: #949494;'>00:00:00</span> 110.        148. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 5</span> 1771-05-01 <span style='color: #949494;'>00:00:00</span>  79.9       153. na_ma      
#&gt; <span style='color: #BCBCBC;'> 6</span> 1777-12-01 <span style='color: #949494;'>00:00:00</span> 122.        157. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 7</span> 1778-01-01 <span style='color: #949494;'>00:00:00</span> 122.        177. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 8</span> 1778-05-01 <span style='color: #949494;'>00:00:00</span> 141.        239. na_kalman  
#&gt; <span style='color: #BCBCBC;'> 9</span> 1778-06-01 <span style='color: #949494;'>00:00:00</span> 143.        172. na_kalman  
#&gt; <span style='color: #BCBCBC;'>10</span> 1778-09-01 <span style='color: #949494;'>00:00:00</span> 145.        172. na_ma      
#&gt; <span style='color: #949494;'># … with 29 more rows</span>
#&gt; 
#&gt; $outlier_mcar_err
#&gt; <span style='color: #949494;'># A tibble: 1 × 4</span>
#&gt;   na_interpolation na_locf na_ma na_kalman
#&gt;              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>            0.968    1.18 0.956     0.958
#&gt; 
#&gt; $outlier_mar_err
#&gt; <span style='color: #949494;'># A tibble: 1 × 4</span>
#&gt;   na_interpolation na_locf na_ma na_kalman
#&gt;              <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'>1</span>             1.38    1.63  1.44      1.26
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/Mayur1009'>Mayur Shende</a>, <a href='https://github.com/neerajdhanraj'>Neeraj Bokde</a>, Andrés E. Feijóo-Lorenzo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


